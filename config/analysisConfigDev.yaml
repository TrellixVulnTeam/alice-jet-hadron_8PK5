---
name: "Analysis config for Jet-H analysis"
# The following are defined by user arguments and a default is not provided:
#   - Energy
#   - Collision system
#   - Event activity
#   - Leading hadron bias type

# Specify all possible desired leading hadron bias values
leadingHadronBiasValues:
    track:
        value: 5
    2.76:
        central:
            cluster:
                value: 10
        semi_central:
            cluster:
                value: 6

# Default iterable options
iterables:
    reaction_plane_orientation: true
    qvector: false

# Basic configuration
inputFilename: "trains/{collision_system}/{trainNumber}/AnalysisResults.root"
inputListName: "AliAnalysisTaskJetH_tracks_caloClusters_{leading_hadron_bias}R2"
# yamllint disable-line rule:line-length
outputPrefix: "output/{collision_system}/{trainNumber}/dev/test/{event_activity}/{leading_hadron_bias}/RP{reaction_plane_orientation}/qVec{qvector}/{task_name}"
outputFilename: "{collision_system}Correlations.root"
printingExtensions: ["pdf", "eps"]
aliceLabel: work_in_progress
trainNumber: &trainNumber 3360

# Convenience variables
# 11h track and jet pt bins
_jet_pt_bins_11h: &JetPtBins11h !JetPtBins [15, 20, 40, 60, 200]
_track_pt_bins_11h: &TrackPtBins11h !TrackPtBins [0.5, 1.0, 1.5, 2.0, 3.0, 4.0, 5.0, 6.0, 10.0]
constituent_cut_biased_jets: true

# Helpful binning information
etaBins: !EtaBins [-1.5, -1.2, -0.8, -0.6, -0.4, 0, 0.4, 0.6, 0.8, 1.2, 1.5]

# Correlations analysis related configuration
Correlations:
    deltaEtaRanges:
        # NOTE: They are assumed to be symmetric with respect to eta.
        #       This leads to discontinuous selection ranges in the background.
        signalDominated: [0, 0.6]
        backgroundDominated: [0.8, 1.2]
    deltaPhiRanges:
        # +/- 1 from 0
        nearSide: [-1, 1]
        # These values are defined relative to pi.
        # +/- 1 from pi.
        awaySide: [-1, 1]
    mixedEventNormalizationOptions:
        etaRange: [-0.3, 0.3]
        compareOptions: false
    joelsCorrelationsFilePath: "joelsCentralCorrelations"
    2d_rebin_factors: [2, 1]
    1d_rebin_factor_delta_eta: 1
    1d_rebin_factor_delta_phi: 1
    processingOptions:
        # General histograms
        generalHistograms: false
        # 2D
        generate2DCorrelations: false
        plot2DCorrelations: false
        plotRPFHighlights: false
        # 1D
        generate1DCorrelations: false
        plot1DCorrelations: false
        # Fit and subtract
        fit1DCorrelations: true
        plot1DCorrelationsWithFits: true
        subtract1DCorrelations: true
        plotSubtracted1DCorrelations: true
        # Yields
        extractYields: false
        plotYields: false
        # Widths
        extractWidths: false
        plotWidths: false
    override:
        # yamllint disable-line rule:line-length
        outputPrefix: "output/{collision_system}/{trainNumber}/dev/{leading_hadron_bias}/{task_name}/RP{reaction_plane_orientation}"
        2.76:
            trainNumber: 3360
        5.02:
            trainNumber: 4358
        iterables:
            reaction_plane_orientation: true
            #track_pt_bin: *TrackPtBins11h
            track_pt_bin:
                - !TrackPtBin
                  bin: 4
                  range: !SelectedRange [1.5, 2.0]
                - !TrackPtBin
                  bin: 5
                  range: !SelectedRange [2.0, 3.0]
            jet_pt_bin:
                - !JetPtBin
                  bin: 2
                  range: !SelectedRange [20, 40]
CorrelationsManager:
    reaction_plane_fit:
        # Event plane resolution parameters
        resolution_parameters:
            R22: 0.5713
            R42: &R42 0.2972
            # Temporarily set to R{4,2} to estimate possible contributions
            R62: *R42
            R82: *R42
        fit_params:
            jetPtBiased20-40:
                trackPt1.0-1.5:
                    args:
                        test_arg: test_arg
                    use_log_likelihood: false
    override:
        # NOTE: The final value is the task name of the Correlations tasks. This is intentionally selected
        #       so that the output is stored in the same directory.
        # yamllint disable-line rule:line-length
        outputPrefix: "output/{collision_system}/{trainNumber}/dev/{leading_hadron_bias}/Correlations"
        2.76:
            trainNumber: 3360
        5.02:
            trainNumber: 4358

GeneralHists:
    enabled: false
    componentsToPlot:
        EventCuts: &EventCutsPlots
            CutStats: !HistPlotter
                kwargs:
                    title: "Cut stats"
                    exact_name_match: true
                    text_label:
                        enabled: true
                        textLocation: [0.82, 0.08]
                    hist_names:
                        - "fCutStats": "Before cuts"
                        - "fCutStatsAfterTrigger": "After trigger selection"
                        - "fCutStatsAfterMultSelection": "After MultSelection"
            NormalizationHist: !HistPlotter
                kwargs:
                    title: "Event selection normalization"
                    text_label:
                        enabled: true
                    hist_names:
                        - "fNormalizationHist": ""
            ZVertex: !HistPlotter
                kwargs:
                    title: "Z vertex"
                    exact_name_match: true
                    x_limits: [-20, 20]
                    text_label:
                        enabled: true
                        textLocation: [0.5, 0.1]
                    hist_names:
                        - "Vtz_raw": "Before event cuts"
                        - "Vtz_selected": "After event cuts"
            Centrality: !HistPlotter
                kwargs:
                    title: "Centrality"
                    y_limits: [3e5, 4.5e5]
                    text_label:
                        enabled: true
                        textLocation: [0.5, 0.1]
                    hist_names:
                        - "Centrality_raw": "Before event cuts"
                        - "Centrality_selected": "After event cuts"
            MultiplicityVsCentralityBeforeCuts: !HistPlotter
                kwargs:
                    logz: true
                    text_label:
                        enabled: true
                    hist_names:
                        - "MultCentCorrelation_raw": ""
            MultiplicityVsCentralityAfterCuts: !HistPlotter
                kwargs:
                    logz: true
                    text_label:
                        enabled: true
                    hist_names:
                        - "MultCentCorrelation_selected": ""
        ZVertex: !HistPlotter
            kwargs:
                title: "Z vertex"
                x_limits: [-15, 15]
                logy: true
                text_label:
                    enabled: true
                    textLocation: [0.5, 0.1]
        Centrality: !HistPlotter
            kwargs:
                title: "Centrality"
                scientific_notation_on_axis: "y"
                text_label:
                    enabled: true
        EventPlane: !HistPlotter
            kwargs:
                title: "Event plane orientations"
                x_limits: [-2.5, 2.5]
                text_label:
                    enabled: true
                    textLocation: [0.1, 0.9]
        JetMatchingSameEventCuts: !HistPlotter
            kwargs:
                text_label:
                    enabled: true
        JetMatchingMixedEventCuts: !HistPlotter
            kwargs:
                text_label:
                    enabled: true
        TrackPt: !HistPlotter
            kwargs:
                title: Associated track $\mathit{p}_{\mathrm{T}}$
                x_label: $\mathit{p}_{\mathrm{T}}^{\mathrm{assoc}}$
                y_label: $\mathrm{dN}/\mathrm{d}\mathit{p}_{\mathrm{T}}$
                logy: true
                text_label:
                    enabled: true
        JetPt: !HistPlotter
            kwargs:
                title: Jet $\mathit{p}_{\mathrm{T}}$
                logy: true
                text_label:
                    enabled: true
                hist_names:
                    - "fHistJetPt_0": "0-10\\%"
                    - "fHistJetPt_1": "10-30\\%"
                    - "fHistJetPt_2": "30-50\\%"
                    - "fHistJetPt_3": "50-90\\%"
        JetPtBias: !HistPlotter
            kwargs:
                title: Jet $\mathit{p}_{\mathrm{T}}$ which passes bias
                logy: true
                text_label:
                    enabled: true
                hist_names:
                    - "fHistJetPtBias_0": "0-10\\%"
                    - "fHistJetPtBias_1": "10-30\\%"
                    - "fHistJetPtBias_2": "30-50\\%"
                    - "fHistJetPtBias_3": "50-90\\%"
        JetEtaPhi: !HistPlotter
            kwargs:
                title: $\eta-\phi$ of jets in correlations
                text_label:
                    enabled: true
                    textLocation: [0.1, 0.9]
        JetHEtaPhi: !HistPlotter
            kwargs:
                title: $\eta-\phi$ of charged hadrons in correlations
                logz: true
                text_label:
                    enabled: true
    override:
        2.76:
            trainNumber: 3360
        5.02:
            trainNumber: 4358
        iterables:
            # Selected values explicitly so there are some iterables to create the object
            # (even though we don't need them).
            reaction_plane_orientation:
                - "inclusive"
            qvector:
                - "inclusive"
            task_label:
                - ""

# Pt hard bins configuration for LHC12a15e_fix embedded into LHC11h.
_ptHardBin10Bins: !PtHardBins &PtHardBins10Bins
    # Disabled here due to a bug parsing the combination of the tag and the anchor
    # yamllint disable-line rule:indentation
    bins: [5, 11, 21, 36, 57, 84, 117, 152, 191, 234, -1]
    train_numbers:
        1: 2701
        2: 2702
        3: 2703
        4: 2704
        5: 2705
        6: 2706
        7: 2707
        8: 2708
        9: 2709
        10: 2710

# Response matrix related configuration
PtHardBins:
    moving_average_threshold: 1.0
    override:
        inputFilename: "trains/{collision_system}/{pt_hard_bin_train_number}/AnalysisResults.root"
        inputListName: "AliAnalysisTaskEmcalEmbeddingHelper_histos"
        iterables:
            reaction_plane_orientation: false
            pt_hard_bin: *PtHardBins10Bins
PtHardFinal:
    override:
        outputPrefix: "output/{collision_system}/dev/{event_activity}/{leading_hadron_bias}/{task_name}"
        iterables:
            # Technically this is true, although not very helpful. However, we must have at least
            # one iterator, so this allows us to do so with minimal change.
            reaction_plane_orientation:
                - "inclusive"
Response:
    override:
        inputFilename: "trains/{collision_system}/{pt_hard_bin_train_number}/AnalysisResults.root"
        # yamllint disable-line rule:line-length
        outputPrefix: "output/{collision_system}/{pt_hard_bin_train_number}/dev/{event_activity}/{leading_hadron_bias}/{task_name}/RP{reaction_plane_orientation}"
        outputFilename: "ResponseMatrixHists.root"
        # yamllint disable-line rule:line-length
        inputListName: "AliJetResponseMaker_hybridJets_AKTFullR020_tracks_pT3000_caloClustersCombined_E3000_pt_scheme_truthJets_AKTFullR020_mcparticles_pT3000_pt_scheme_Bias0_BiasType1_EMCALfid_Cent{cent_min}_{cent_max}_histos"
        iterables:
            reaction_plane_orientation: true
            pt_hard_bin: *PtHardBins10Bins
# Final response histograms.
ResponseFinal:
    particle_level_spectra:
        # We only want a single jet pt bin. So we create a fake bin value.
        # NOTE: It is required to specify that the range is a SelectedRange due to
        #       the way that YAML constructs the object!
        particle_level_spectra_bin: !JetPtBin
            bin: 0
            range: !SelectedRange [20, 40]
        # Rebin to 5 GeV wide bins.
        rebin_width: 5
        # Remove the first bin of the histogram (corresponding to 0 - 5 GeV bin if the rebin was performed).
        remove_first_bin: true
        # Normalize each spectra the number of jets displayed.
        normalize_by_n_jets: true
        # Maximum particle level pt to display.
        particle_level_max_pt: 100
        # Plot the points for each angle with a small offset.
        plot_points_with_offset: false
    override:
        # yamllint disable-line rule:line-length
        outputPrefix: "output/{collision_system}/dev/{event_activity}/{leading_hadron_bias}/{task_name}/RP{reaction_plane_orientation}"
        outputFilename: "ResponseMatrixHists.root"
        aliceLabel: final
        iterables:
            reaction_plane_orientation: true
ResponseManager:
    # NOTE: The histograms are saved after they are scaled, but before the particle level spectra is projected.
    read_hists_from_root_file: true
    override:
        # NOTE: The final value is the task name of the ResponseFinal tasks. This is intentionally selected
        #       so that the output is stored in the same directory.
        outputPrefix: "output/{collision_system}/dev/{event_activity}/{leading_hadron_bias}/ResponseFinal"

# Configuration for plotting EMCal corrections from a train.
EMCalCorrections:
    # Track pt bins that are used when binning various cluster-track matching histograms.
    track_pt_bins: !TrackPtBins [0.15, 0.5, 1, 1.5, 2, 3, 4, 5, 8, -1]
    componentsToPlot:
        CellEnergy:
            # Specialize via a specific histogram name
            CellEnergy: !HistPlotter
                kwargs: &CellEnergy
                    # The spectra fall off rather quickly
                    x_limits: [0, 4]
                    title: "Cell energy"
                    logy: true
                    text_label:
                        # "enabled" is not actually a real field - there just needs
                        # to be at least one field. Here, it could be removed
                        # because other values are specified, but it is kept as an
                        # example.
                        enabled: true
                        cellLabel: true
                    # If hist_names isn't specified, then we just we use the
                    # object name. Here, that is "CellEnergy"
                    # However, we specify the names so we can plot before and
                    # after on the same plot
                    hist_names:
                        - "CellEnergyDistBefore": "Before energy calibration"
                        - "CellEnergyDistAfter": "After energy calibration"
        CellBadChannel:
            CellEnergy: !HistPlotter
                kwargs:
                    <<: *CellEnergy
                    hist_names:
                        - "CellEnergyDistBefore": "Before bad channel removal"
                        - "CellEnergyDistAfter": "After bad channel removal"
        CellTimeCalib:
            CellTime: !HistPlotter
                kwargs:
                    title: "Cell time"
                    x_limits: [-300e-9, 900e-9]
                    scientific_notation_on_axis: "both"
                    text_label:
                        cellLabel: true
                    hist_names:
                        # Of the form "HistName": "HistTitle"
                        - "CellTimeDistBefore": "Before time calibration"
                        - "CellTimeDistAfter": "After time calibration"
        Clusterizer:
            ProcessingTime: !HistPlotter
                kwargs:
                    title: "Clusterizer processing time"
                    text_label:
                        enabled: true
                    hist_names:
                        - "RealTime": "Clock time"
                        - "CPUTime": "CPU time"
        ClusterExotics:
            EtaPhiDistBefore: !HistPlotter
                kwargs: &exoticsEtaPhi
                    # Don't use quotes if we are using latex
                    title: Cluster $\eta,\phi$ before exotics removal
                    output_name: "ClusterEtaPhiBeforeExotics"
                    y_limits: [1.25, 3.5]
                    logz: true
                    text_label:
                        clusterLabel: true
            EtaPhiDistAfter: !HistPlotter
                kwargs:
                    <<: *exoticsEtaPhi
                    title: Cluster $\eta,\phi$ after exotics removal
                    output_name: "ClusterEtaPhiAfterExotics"
            ExoticsRemoved: !HistPlotter
                kwargs:
                    <<: *exoticsEtaPhi
                    title: $\eta, \phi$ of cluster removed during exotic cut
                    output_name: "ClusterEtaPhiRemovedByExotics"
                    hist_names:
                        - "hExoticsEtaPhiRemoved": ""
            ExoticClusters: !HistPlotter
                kwargs:
                    title: "Energy of Exotic Clusters"
                    output_name: "ExoticClusterEnergy"
                    logy: true
                    text_label:
                        clusterLabel: true
                    hist_names:
                        - "EnergyExoticClusters": "Exotic Clusters"
        ClusterNonLinearity:
            EnergyDist: !HistPlotter
                kwargs:
                    title: "Non-linearity cluster energy spectra"
                    logy: true
                    text_label:
                        clusterLabel: true
                    hist_names:
                        - "EnergyDistBefore": "Before non-linearity"
                        - "EnergyDistAfter": "After non-linearity"
            EnergyTimeDistBefore: !HistPlotter
                kwargs: &energyTimeDist
                    y_limits: [-300e-9, 400e-9]
                    x_limits: [0, 80]
                    logz: true
                    output_name: EnergyTimeBeforeNonLinearity
                    title: Cluster energy vs time before cluster non-linearity
                    text_label:
                        clusterLabel: true
            EnergyTimeDistAfter: !HistPlotter
                kwargs:
                    <<: *energyTimeDist
                    output_name: EnergyTimeAfterNonLinearity
                    title: Cluster energy vs time after cluster non-linearity
        ClusterTrackMatcher:
            MatchDistAll: !HistPlotter
                kwargs:
                    title: "All cluster-track matches"
                    x_label: $\Delta\eta$, $\Delta\varphi$
                    x_limits: [-0.12, 0.12]
                    text_label: &matchDistLabel
                        clusterLabel: true
                        trackLabel: true
                        textLocation: [0.25, 0.9]
                    hist_names:
                        - "MatchEtaAll": $\eta$ matches
                        - "MatchPhiAll": $\varphi$ matches
            MatchDifferential1: !HistPlotter
                kwargs: &matchDifferential
                    title: $\Delta\eta$, $\Delta\varphi$ matches
                    x_label: $\Delta\eta$, $\Delta\varphi$
                    x_limits: [-0.12, 0.12]
                    scientific_notation_on_axis: "y"
                    text_label:
                        <<: *matchDistLabel
                    hist_names:
                        - "fHistMatch{angle}_{cent}_{pt_bin}_{eta_direction}": ""
                    processing: &matchDifferentialProcessing
                        func_name: "eta_phi_match_hist_names"
                        angles: ["Eta", "Phi"]
                        cent_bins:
                            - 0: "Pos. tracks"
                            - 5: "Neg. tracks"
                        pt_bins: [1]
                        eta_directions:
                            - 0: $\eta < 0$
                            - 1: $\eta > 0$
            MatchDifferential2: !HistPlotter
                kwargs:
                    <<: *matchDifferential
                    processing:
                        <<: *matchDifferentialProcessing
                        pt_bins: [2]
            MatchDifferential3: !HistPlotter
                kwargs:
                    <<: *matchDifferential
                    processing:
                        <<: *matchDifferentialProcessing
                        pt_bins: [3]
            MatchDifferential4: !HistPlotter
                kwargs:
                    <<: *matchDifferential
                    processing:
                        <<: *matchDifferentialProcessing
                        pt_bins: [4]
            MatchDifferential5: !HistPlotter
                kwargs:
                    <<: *matchDifferential
                    processing:
                        <<: *matchDifferentialProcessing
                        pt_bins: [5]
            MatchDifferential6: !HistPlotter
                kwargs:
                    <<: *matchDifferential
                    processing:
                        <<: *matchDifferentialProcessing
                        pt_bins: [6]
            MatchDifferential7: !HistPlotter
                kwargs:
                    <<: *matchDifferential
                    processing:
                        <<: *matchDifferentialProcessing
                        pt_bins: [7]
            MatchDifferential8: !HistPlotter
                kwargs:
                    <<: *matchDifferential
                    processing:
                        <<: *matchDifferentialProcessing
                        pt_bins: [8]
            MatchDifferential9: !HistPlotter
                kwargs:
                    <<: *matchDifferential
                    processing:
                        <<: *matchDifferentialProcessing
                        pt_bins: [9]
        ClusterHadronicCorrection:
            # By following the same order as how the histograms are stored in the file,
            # we can be assured that the proper hist is matched to the proper config.
            MatchEtaPhiAll: !HistPlotter
                kwargs:
                    title: $\Delta\eta$, $\Delta\varphi$ matches (track $\leftrightarrow$ cluster)
                    output_name: "EtaPhiMatches"
                    logz: true
                    exact_name_match: true
                    text_label:
                        <<: *matchDistLabel
                        textLocation: [0.35, 0.92]
                    hist_names:
                        - "fHistMatchEtaPhiAll": "Matches"
            MatchEtaPhiAllCl: !HistPlotter
                kwargs:
                    title: $\Delta\eta$, $\Delta\varphi$ matches from clusters
                    output_name: "EtaPhiMatchesFromClusters"
                    logz: true
                    exact_name_match: true
                    text_label:
                        <<: *matchDistLabel
                        textLocation: [0.35, 0.92]
                    hist_names:
                        - "fHistMatchEtaPhiAllCl": "Matches"
            TrackPESub: !HistPlotter
                kwargs:
                    output_name: "TrackPESub"
                    x_label: $\sum p$ (GeV) weighted with $E_{\mathrm{sub}}$
                    x_limits: [0, 175]
                    logy: true
                    text_label: &clusterTrackLabel
                        clusterLabel: true
                        trackLabel: true
                    hist_names:
                        # 0, 5 are 0-10%
                        - "fHistEsubPch_0": "Positive charged tracks"
                        - "fHistEsubPch_5": "Negative charged tracks"
            TrackPVsEOverPRatio: !HistPlotter
                kwargs:
                    output_name: "TrackPEOverPRatio"
                    # yamllint disable-line rule:line-length
                    title: $\sum p_{\mathrm{track}}$ vs $E_{\mathrm{cluster}}$ / $\sum p_{\mathrm{track}}$ using all matches
                    x_limits: [0, 150]
                    y_limits: [0, 1.1]
                    logz: true
                    text_label: &clusterTrackLabelRight
                        <<: *clusterTrackLabel
                        textLocation: [0.71, 0.92]
                    hist_names:
                        # 0 is 0-10%
                        - "fHistEsubPchRatAll_0": ""
            EClusVsEOverPRatio: !HistPlotter
                kwargs:
                    output_name: "ClusterEoverPRatio"
                    # yamllint disable-line rule:line-length
                    title: $E_{\mathrm{cluster}}$ vs $E_{\mathrm{cluster}}$ / $\sum p_{\mathrm{track}}$ using all matches
                    x_limits: [0, 150]
                    logz: true
                    text_label:
                        <<: *clusterTrackLabelRight
                    hist_names:
                        # 0 is 0-10%
                        - "fHistMatchEvsP_0": ""
            EOverPVsCent: !HistPlotter
                kwargs:
                    output_name: "EOverPCent"
                    title: &eOverPVsCentTitle $E_{\mathrm{cluster}}$ / $p_{\mathrm{track}}$ vs Cent
                    logz: true
                    text_label:
                        <<: *clusterTrackLabel
                        textLocation: [0.35, 0.15]
                    hist_names:
                        - "EoPCent": ""
            NMatchesVsCent: !HistPlotter
                kwargs:
                    title: &nMatchesVsCentTitle "N matches vs centrality"
                    logz: true
                    text_label:
                        <<: *clusterTrackLabel
                    hist_names:
                        - "NMatchesCent": *nMatchesVsCentTitle
            # Oversubtracted hists
            OversubVsClusE: !HistPlotter
                kwargs:
                    output_name: "OversubVsClusE"
                    title: Oversubtracted E vs $E_{\textrm{cluster}}$
                    logz: true
                    text_label:
                        <<: *clusterTrackLabel
                    hist_names:
                        - "fHistOversub_0": ""
            OversubVsClusEFromEmbedClusters: !HistPlotter
                kwargs:
                    output_name: "OversubVsClusEFromEmbedClusters"
                    title: Oversubtracted E vs $E_{\textrm{cluster}}$ for embedded dominated clusters
                    logz: true
                    text_label:
                        <<: *clusterTrackLabel
                    hist_names:
                        - "fHistOversubMCClusters_0": ""
            OversubVsClusEFromDataClusters: !HistPlotter
                kwargs:
                    output_name: "OversubVsClusEFromDataClusters"
                    title: Oversubtracted E vs $E_{\textrm{cluster}}$ for data dominated clusters
                    logz: true
                    text_label:
                        <<: *clusterTrackLabel
                    hist_names:
                        - "fHistOversubNonMCClusters_0": ""
            OversubVsClusEFromEmbedTracks: !HistPlotter
                kwargs:
                    output_name: "OversubVsClusEFromEmbedTracks"
                    title: Oversubtracted E vs $E_{\textrm{cluster}}$ for embedded dominated tracks
                    logz: true
                    text_label:
                        <<: *clusterTrackLabel
                    hist_names:
                        - "fHistEmbTrackMatchesOversub_0": ""
            OversubVsClusEFromDataTracks: !HistPlotter
                kwargs:
                    output_name: "OversubVsClusEFromDataTracks"
                    title: Oversubtracted E vs $E_{\textrm{cluster}}$ for data dominated tracks
                    logz: true
                    text_label:
                        <<: *clusterTrackLabel
                    hist_names:
                        - "fHistNonEmbTrackMatchesOversub_0": ""
    override:
        inputListName: "AliEmcalCorrectionTask{corrections_label}_histos"
        iterables:
            reaction_plane_orientation:
                - "inclusive"
            qvector:
                - "inclusive"
            task_label:
                - "standard"
                #- "embed"
                #- "combined"
                #- "data"

# Configuration for plotting EMCal Embedding related histograms.
EMCalEmbedding:
    componentsToPlot:
        EventCuts:
            <<: *EventCutsPlots
        CrossSection:
            text_label:
                enabled: true
            hist_names:
                - "fHistXSection": "Pythia Cross Section"
        Trials:
            text_label:
                enabled: true
        PtHard:
            text_label:
                enabled: true
        EmbeddedEventRejection:
            scientific_notation_on_axis: "y"
            text_label:
                enabled: true
        EmbeddedEventsAttempted:
            x_limits: [0, 200]
            logy: true
            scientific_notation_on_axis: "y"
            text_label:
                enabled: true
        NumberOfFiles:
            y_label: "Number"
            text_label:
                enabled: true
        AbsoluteFileNumber:
            x_label: "File number"
            y_label: "Number"
            text_label:
                enabled: true
        InternalEventCuts:
            text_label:
                enabled: true
    override:
        inputListName: "AliAnalysisTaskEmcalEmbeddingHelper_histos"
        trainNumber: 3231
        iterables:
            reaction_plane_orientation: false
            pt_hard_bin: *PtHardBins10Bins

# Save some time by skipping these bins for analysis
skipPtBins:
    jet: [0, 2, 3]
    track: []

fitOptions:
    # If false, instead used the stored fit information
    performFit: false
    # Whether to draw the minuit QA plots
    drawMinuitQAPlots: true
    # Plot summed of each EP angle fit summed together as a cross-check of all anlges
    plotSummedFitCrosscheck: false
    # Perform a signal + background fit instead of just a background fit
    includeSignalInFit: true
    # Fit all angles signal.
    # Note that this precludes fitting the signal in the other EP angles
    allAnglesSignal: true
    # Fit the background using all angles
    # This should be fairly uncommon, but compliments the signal option
    allAnglesBackground: false
    # If true, plot minimal labeling for the all angles subtracted hist.
    # Used for display next two the 4 panel fit plot
    minimalLabelsForAllAnglesSubtracted: true
    # Whether the fit should be included
    includeFitError: true
    # Whether it should be recalculated
    calculateFitError: false
    # Which bins should be used with log likelihood
    # instead of Chi2
    logLikelihoodTrackPtBins:
        # Of the form `jetPtBin: trackPtBin`
        1: [8]
        2: [5, 6, 7, 8]
